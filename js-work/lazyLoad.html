<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/e-style.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <style type="text/css">
        .clearfix::after{
            clear: both; display: block; content: "";
        }
        .lazyLoad{
            max-width: 800px; margin: 0 auto;
        }
        .lazyLoad li{
            width: 380px; margin: 10px;  float: left;
        }
        .lazyLoad li img{
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="lazyLoad">
        <ul class="clearfix">
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg">
                </a>
            </li>
        </ul>
        <div class="empty"></div>
    </div>
    <script src="../js/jquery-1.11.3.js"></script>
    <script>
        /*!function(){
            $(".lazyLoad img").each(function(){
                if(isShow($(this))){
                    showImg($(this));
                }
            });
        }();
        $(window).on("scroll",function(){
            $(".lazyLoad img").each(function(){
               if(isShow($(this))){
                   showImg($(this));
               }
            });
        });

        function isShow($ct){
            var windowHeight=$(window).height();
            var offset=$ct.offset().top;
            var scrollTop=$(window).scrollTop();
            if(offset>scrollTop&&offset<windowHeight+scrollTop){
                return true;
            }
            return false;
        };
        function showImg($ct){
            var href=$ct.attr("data-src");
            $ct.attr("src",href);
        }*/

       /* function Exposure($ct,callback){
            this.callback=callback;
            this.$ct=$ct;
            this.init();
        };
        Exposure.prototype.init=function(){
            this.bind();
            this.check();
        }
        Exposure.prototype.bind=function(){
            var _this=this;
            $(window).on("scroll",function(){
                _this.check();
            });
        };
        Exposure.prototype.check=function(){
          if(this.isShow(this.$ct)){
              this.callback(this.$ct);
          }
        };
        Exposure.prototype.isShow=function($ct){
            var windowHeight=$(window).height();
            var offset=$ct.offset().top;
            var scrollTop=$(window).scrollTop();
            if(offset>scrollTop&&offset<windowHeight+scrollTop){
                return true;
            }
            return false;
        };
        $(".lazyLoad img").each(function(){
            new Exposure($(this),function($node){
                showImg($node);
            });
        })
        function showImg($ct){
            var href=$ct.attr("data-src");
            $ct.attr("src",href);
        };*/

        var lazy=(function(){
            function Exposure($ct,callback){
                this.callback=callback;
                this.$ct=$ct;
                this.init();
            };
            Exposure.prototype.init=function(){
                this.bind();
                this.check();
            }
            Exposure.prototype.bind=function(){
                var _this=this;
                $(window).on("scroll",function(){
                    _this.check();
                });
            };
            Exposure.prototype.check=function(){
                if(this.isShow(this.$ct)){
                    this.callback(this.$ct);
                }
            };
            Exposure.prototype.isShow=function($ct){
                var windowHeight=$(window).height();
                var offset=$ct.offset().top;
                var scrollTop=$(window).scrollTop();
                if(offset>scrollTop&&offset<windowHeight+scrollTop){
                    return true;
                }
                return false;
            };
            return {
                init: function($target,callback){
                    $target.each(function(){
                        new Exposure($(this),callback);
                    })
                }
            };
        })();
        lazy.init($(".lazyLoad img"),function($node){
            showImg($node);
        });
        function showImg($ct){
            var href=$ct.attr("data-src");
            $ct.attr("src",href);
        };
    </script>
</body>
</html>